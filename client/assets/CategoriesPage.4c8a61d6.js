import{a as E}from"./QSelect.0750efe2.js";import{A as y,ai as q,r as m,w as F,_ as w,C as p,D as V,E as a,F as u,af as i,L as f,K as L,B as _,M as g,aj as D,H as $,O as T,ay as A,az as j}from"./index.057df2d4.js";import{C as I,Q as O,a as P}from"./ConfirmDialog.7a0fae5d.js";import{u as z}from"./categories.store.8106cffa.js";import{a as k,Q as N}from"./QCard.68e529c7.js";import{Q as M}from"./QInput.b75c9e6e.js";import{Q as R}from"./QCardActions.5e014f9d.js";import{Q as U}from"./QDialog.6a426d57.js";import"./use-timeout.6ff230f8.js";import"./QItem.982b90e0.js";import"./use-dark.ea34e692.js";import"./QSeparator.7f1eb457.js";import"./QList.2b4e0f55.js";import"./message.store.659e4ee3.js";import"./use-quasar.85ad5d58.js";const H=y({name:"ProgramEdit",props:{isShow:{type:Boolean,default:!1},category:{type:Object}},components:{},setup(e,o){const s=q(()=>e.isShow),l=m();return F(()=>s.value,t=>{t&&(e.category?l.value={...e.category}:l.value={name:"\u043D\u0435 \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u043E",isDefault:"false"})}),{showing:s,categoryToEdit:l,cancel:()=>{o.emit("cancel")},save:()=>{o.emit("ok",l.value)}}}}),K=i("div",null,null,-1),G={class:"q-ml-sm"};function J(e,o,s,l,n,c){return p(),V(U,{modelValue:e.showing,"onUpdate:modelValue":o[1]||(o[1]=t=>e.showing=t),persistent:""},{default:a(()=>[u(N,{style:{width:"300px"}},{default:a(()=>[u(k,{class:"row items-center"},{default:a(()=>[K]),_:1}),u(k,{class:"q-mr-md"},{default:a(()=>[i("div",null,[i("div",G,[u(M,{class:"q-mb-md",outlined:"",autofocus:"",modelValue:e.categoryToEdit.name,"onUpdate:modelValue":o[0]||(o[0]=t=>e.categoryToEdit.name=t),label:"\u0418\u043C\u044F \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438"},null,8,["modelValue"])])])]),_:1}),u(R,{align:"right"},{default:a(()=>[u(f,{flat:"",label:"\u041E\u0442\u043C\u0435\u043D\u0430",color:"primary",onClick:e.cancel},null,8,["onClick"]),u(f,{flat:"",label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",color:"primary",onClick:e.save},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var W=w(H,[["render",J]]);const X=[{name:"name",required:!0,label:"\u0418\u043C\u044F \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!1},{name:"id",required:!0,label:"\u0423\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435",align:"right",field:e=>e.id,format:e=>`${e}`,sortable:!1}],Y=y({name:"CategoriesList",components:{CategoryEdit:W,ConfirmDialog:I},setup(){const e=z(),{categoriesList:o}=L(e),s=m(!1),l=m(!1),n=m(null),c=m(null),t=m(0),C=async()=>{await e.getCategories()},r=d=>{t.value=d,l.value=!0},v=async()=>{await e.delete(t.value),h()},h=()=>{t.value=0,l.value=!1},S=d=>{c.value=d,n.value=d,s.value=!0},b=()=>{n.value=null,s.value=!0},Q=async d=>{d.name!==""&&(n.value?await e.update(d,c.value):await e.insert(d)),s.value=!1},B=()=>{n.value=null,s.value=!1};return C(),{categoriesList:o,columns:X,isEditShow:s,isShowDeleteDialog:l,editCategory:n,refreshCategories:C,confirmDelete:r,showEdit:S,addCategory:b,closeEdit:B,saveCategory:Q,deleteCategory:v,closeDeleteDialog:h}}}),Z=e=>(A("data-v-6278e1e1"),e=e(),j(),e),x={class:"flex justify-evenly full-width q-pa-md"},ee=Z(()=>i("div",{class:"text-h6 full-width q-ma-md"}," \u0421\u043F\u0438\u0441\u043E\u043A \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0439 \u043F\u0440\u043E\u0433\u0440\u0430\u043C\u043C \u043D\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 ",-1)),ue={class:"full-width"},oe={class:"row justify-end"},te={class:"flex justify-end item-control"},ae={key:0,class:"q-gutter-xs"},se={key:1};function le(e,o,s,l,n,c){const t=_("CategoryEdit"),C=_("ConfirmDialog");return p(),g(T,null,[i("section",x,[ee,i("div",ue,[u(P,{flat:"",bordered:"","virtual-scroll":"",rows:e.categoriesList,columns:e.columns,"row-key":"name","rows-per-page-options":[15,20,25,50,0]},{"body-cell-id":a(r=>[u(O,{props:r},{default:a(()=>[i("div",oe,[i("div",te,[r.row.isDefault!=="true"?(p(),g("div",ae,[u(f,{class:"q-mr-sm",size:"12px",flat:"",dense:"",round:"",icon:"edit",onClickCapture:D(v=>e.showEdit(r.row),["stop"])},{default:a(()=>[u(E,null,{default:a(()=>[$("\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C")]),_:1})]),_:2},1032,["onClickCapture"]),u(f,{class:"q-mr-sm",size:"12px",flat:"",dense:"",round:"",icon:"delete",onClickCapture:D(v=>e.confirmDelete(r.row.id),["stop"])},{default:a(()=>[u(E,null,{default:a(()=>[$("\u0423\u0434\u0430\u043B\u0438\u0442\u044C")]),_:1})]),_:2},1032,["onClickCapture"])])):(p(),g("div",se,"\u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E"))])])]),_:2},1032,["props"])]),"top-right":a(()=>[i("div",null,[u(f,{outline:"",color:"primary",label:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",onClick:o[0]||(o[0]=r=>e.addCategory()),class:"q-mr-xs"}),u(f,{outline:"",color:"primary",label:"\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C",onClick:o[1]||(o[1]=r=>e.refreshCategories())})])]),_:1},8,["rows","columns"])])]),u(t,{isShow:e.isEditShow,category:e.editCategory,onCancel:e.closeEdit,onOk:e.saveCategory},null,8,["isShow","category","onCancel","onOk"]),u(C,{isShow:e.isShowDeleteDialog,message:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u0443\u044E \u0437\u0430\u043F\u0438\u0441\u044C \u043D\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435?",onOk:e.deleteCategory,onCancel:e.closeDeleteDialog},null,8,["isShow","onOk","onCancel"])],64)}var ne=w(Y,[["render",le],["__scopeId","data-v-6278e1e1"]]);const ie=y({name:"ProgramsPage",components:{CategoriesList:ne},setup(){return{}}}),re={class:"flex justify-evenly"};function de(e,o,s,l,n,c){const t=_("CategoriesList");return p(),g("section",re,[u(t)])}var Se=w(ie,[["render",de]]);export{Se as default};
