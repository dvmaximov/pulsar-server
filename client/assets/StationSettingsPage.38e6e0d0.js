import{R as N,A as _,ai as k,r as f,w as $,_ as v,C as r,D as m,E as c,F as a,aM as V,af as l,I as E,G,L as T,K as R,B as y,M as S,O as h,N as b,ay as O,az as Q}from"./index.057df2d4.js";import{u as g,a as I}from"./socket.store.733a6548.js";import{a as p,Q as q}from"./QCard.68e529c7.js";import{Q as w}from"./QInput.b75c9e6e.js";import{Q as D}from"./QCardActions.5e014f9d.js";import{Q as L}from"./QDialog.6a426d57.js";import"./use-dark.ea34e692.js";import"./use-timeout.6ff230f8.js";const C={SETTING_AZIMUTH_SPEED:1,SETTING_SLOPE_SPEED:2,SETTING_CURRENT_AZIMUTH:3,SETTING_CURRENT_SLOPE:4,SETTING_VERSION:5,SETTING_PORT:6,SETTING_SERVER:7,SETTING_STATION:8},A=N("station-settings",{state:()=>({settingsList:[]}),getters:{settings:t=>t.settingsList.filter(e=>e.id!==C.SETTING_VERSION)},actions:{init(){const t=g();t.on("stationSettings",async e=>{const s=e.message;this.settingsList=s.message}),t.on("stationSettingUpdated",async e=>{const n=e.message.message;this.settingsList=this.settingsList.map(u=>u.id===n.id?n:u)})},async getSettings(){const t=g(),s=I().getCurrentStation();!s||t.emit("getStationSettings",s,{message:"getStationSettings"})},async updateSetting(t){const e=g(),n=I().getCurrentStation();e.emit("updateStationSetting",n,{setting:t})}}}),P=_({name:"StationSettingEdit",props:{isShow:{type:Boolean,default:!1},setting:{type:Object}},components:{},setup(t,e){const s=k(()=>t.isShow),n=f();return $(()=>s.value,i=>{i&&(n.value={...t.setting})}),{showing:s,settingToEdit:n,sendClose:()=>{e.emit("cancel")},sendValue:()=>{e.emit("ok",n.value)}}}}),U={class:"q-ml-sm"},B={class:"q-ml-sm"},j={class:"q-ml-sm"};function M(t,e,s,n,u,d){return r(),m(L,{modelValue:t.showing,"onUpdate:modelValue":e[2]||(e[2]=i=>t.showing=i),persistent:""},{default:c(()=>[a(q,{style:{width:"300px"}},{default:c(()=>[a(p,{class:"row items-center"},{default:c(()=>[a(V,{icon:"edit",color:"primary","text-color":"white"}),l("div",null,[l("div",U,E(t.settingToEdit.name),1)])]),_:1}),t.settingToEdit.type==="string"?(r(),m(p,{key:0,class:"q-mr-md"},{default:c(()=>[l("div",null,[l("div",B,[a(w,{class:"q-mb-md",outlined:"",autofocus:"",modelValue:t.settingToEdit.value,"onUpdate:modelValue":e[0]||(e[0]=i=>t.settingToEdit.value=i)},null,8,["modelValue"])])])]),_:1})):t.settingToEdit.type==="number"?(r(),m(p,{key:1,class:"q-mr-md"},{default:c(()=>[l("div",null,[l("div",j,[a(w,{class:"q-mb-md",outlined:"",autofocus:"",type:"number",modelValue:t.settingToEdit.value,"onUpdate:modelValue":e[1]||(e[1]=i=>t.settingToEdit.value=i)},null,8,["modelValue"])])])]),_:1})):G("",!0),a(D,{align:"right"},{default:c(()=>[a(T,{flat:"",label:"\u041E\u0442\u043C\u0435\u043D\u0430",color:"primary",onClick:t.sendClose},null,8,["onClick"]),a(T,{flat:"",label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",color:"primary",onClick:t.sendValue},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var F=v(P,[["render",M]]);const H=_({name:"StationSettings",components:{StationSettingEdit:F},setup(){const t=A(),{settings:e}=R(t),s=f(!1),n=f(null);t.init(),t.getSettings();const u=o=>{n.value=o,s.value=!0},d=()=>{s.value=!1};return{SETTING:C,settings:e,isShowEdit:s,setting:n,showEdit:u,closeEdit:d,edit:o=>{o.type==="number"&&(o.value=+o.value),t.updateSetting(o),d()}}}}),Z=t=>(O("data-v-eecfd154"),t=t(),Q(),t),z={class:"flex justify-evenly full-width q-px-xl"},K=Z(()=>l("div",{class:"text-h6 full-width q-ma-md"},"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0441\u0442\u0430\u043D\u0446\u0438\u0438",-1)),W={class:"setting-name"},J={class:"setting-value text-bold"};function X(t,e,s,n,u,d){const i=y("StationSettingEdit");return r(),S(h,null,[l("section",z,[K,(r(!0),S(h,null,b(t.settings,o=>(r(),S("div",{key:o.id,class:"full-width flex justify-between q-mb-md"},[l("div",W,E(o.name),1),l("div",J,E(o.value),1),l("div",null,[a(T,{outline:"",color:"primary",label:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C",onClick:st=>t.showEdit(o),disable:o.id===t.SETTING.SETTING_PORT||o.id===t.SETTING.SETTING_SERVER||o.id===t.SETTING.SETTING_STATION},null,8,["onClick","disable"])])]))),128))]),a(i,{isShow:t.isShowEdit,setting:t.setting,onOk:t.edit,onCancel:t.closeEdit},null,8,["isShow","setting","onOk","onCancel"])],64)}var Y=v(H,[["render",X],["__scopeId","data-v-eecfd154"]]);const x=_({name:"StationSettingsPage",components:{StationSettings:Y},setup(){return{}}}),tt={class:"flex justify-evenly"};function et(t,e,s,n,u,d){const i=y("StationSettings");return r(),S("section",tt,[a(i)])}var ct=v(x,[["render",et]]);export{ct as default};
