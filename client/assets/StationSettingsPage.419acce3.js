import{X as k,A as v,ai as I,r as f,w as $,_ as T,C as r,D as S,E as c,F as a,aM as N,M as l,I as _,G as V,L as E,K as b,B as C,N as m,P as h,O as G,ay as Q,az as R}from"./index.350f355b.js";import{u as g,a as w}from"./socket.store.1926277b.js";import{a as p,Q as D}from"./QCard.ae2809b5.js";import{Q as y}from"./QInput.e7a1d1fd.js";import{Q as O}from"./QCardActions.bdcc4428.js";import{Q as q}from"./QDialog.54c9f133.js";import"./use-dark.b5d912e5.js";import"./use-timeout.c6eeeaf5.js";const L={SETTING_AZIMUTH_SPEED:1,SETTING_SLOPE_SPEED:2,SETTING_CURRENT_AZIMUTH:3,SETTING_CURRENT_SLOPE:4,SETTING_VERSION:5,SETTING_PORT:6,SETTING_SERVER:7,SETTING_STATION:8},P=k("station-settings",{state:()=>({settingsList:[]}),getters:{settings:t=>t.settingsList.filter(e=>e.id!==L.SETTING_VERSION)},actions:{init(){const t=g();t.on("stationSettings",async e=>{const s=e.message;this.settingsList=s.message}),t.on("stationSettingUpdated",async e=>{const n=e.message.message;this.settingsList=this.settingsList.map(u=>u.id===n.id?n:u)})},async getSettings(){const t=g(),s=w().getCurrentStation();!s||t.emit("getStationSettings",s,{message:"getStationSettings"})},async updateSetting(t){const e=g(),n=w().getCurrentStation();e.emit("updateStationSetting",n,{setting:t})}}}),U=v({name:"StationSettingEdit",props:{isShow:{type:Boolean,default:!1},setting:{type:Object}},components:{},setup(t,e){const s=I(()=>t.isShow),n=f();return $(()=>s.value,o=>{o&&(n.value={...t.setting})}),{showing:s,settingToEdit:n,sendClose:()=>{e.emit("cancel")},sendValue:()=>{e.emit("ok",n.value)}}}}),A={class:"q-ml-sm"},B={class:"q-ml-sm"},j={class:"q-ml-sm"};function M(t,e,s,n,u,d){return r(),S(q,{modelValue:t.showing,"onUpdate:modelValue":e[2]||(e[2]=o=>t.showing=o),persistent:""},{default:c(()=>[a(D,{style:{width:"300px"}},{default:c(()=>[a(p,{class:"row items-center"},{default:c(()=>[a(N,{icon:"edit",color:"primary","text-color":"white"}),l("div",null,[l("div",A,_(t.settingToEdit.name),1)])]),_:1}),t.settingToEdit.type==="string"?(r(),S(p,{key:0,class:"q-mr-md"},{default:c(()=>[l("div",null,[l("div",B,[a(y,{class:"q-mb-md",outlined:"",autofocus:"",modelValue:t.settingToEdit.value,"onUpdate:modelValue":e[0]||(e[0]=o=>t.settingToEdit.value=o)},null,8,["modelValue"])])])]),_:1})):t.settingToEdit.type==="number"?(r(),S(p,{key:1,class:"q-mr-md"},{default:c(()=>[l("div",null,[l("div",j,[a(y,{class:"q-mb-md",outlined:"",autofocus:"",type:"number",modelValue:t.settingToEdit.value,"onUpdate:modelValue":e[1]||(e[1]=o=>t.settingToEdit.value=o)},null,8,["modelValue"])])])]),_:1})):V("",!0),a(O,{align:"right"},{default:c(()=>[a(E,{flat:"",label:"\u041E\u0442\u043C\u0435\u043D\u0430",color:"primary",onClick:t.sendClose},null,8,["onClick"]),a(E,{flat:"",label:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",color:"primary",onClick:t.sendValue},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}var F=T(U,[["render",M]]);const H=v({name:"StationSettings",components:{StationSettingEdit:F},setup(){const t=P(),{settings:e}=b(t),s=f(!1),n=f(null);t.init(),t.getSettings();const u=i=>{n.value=i,s.value=!0},d=()=>{s.value=!1};return{settings:e,isShowEdit:s,setting:n,showEdit:u,closeEdit:d,edit:i=>{i.type==="number"&&(i.value=+i.value),t.updateSetting(i),d()}}}}),Z=t=>(Q("data-v-11988de2"),t=t(),R(),t),z={class:"flex justify-evenly full-width"},K=Z(()=>l("div",{class:"text-h6 full-width q-ma-md"},"\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 \u0441\u0442\u0430\u043D\u0446\u0438\u0438",-1)),W={class:"setting-name"},X={class:"setting-value text-bold"};function J(t,e,s,n,u,d){const o=C("StationSettingEdit");return r(),m(h,null,[l("section",z,[K,(r(!0),m(h,null,G(t.settings,i=>(r(),m("div",{key:i.id,class:"full-width flex justify-between q-mb-md"},[l("div",W,_(i.name),1),l("div",X,_(i.value),1),l("div",null,[a(E,{outline:"",color:"primary",label:"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C",onClick:st=>t.showEdit(i)},null,8,["onClick"])])]))),128))]),a(o,{isShow:t.isShowEdit,setting:t.setting,onOk:t.edit,onCancel:t.closeEdit},null,8,["isShow","setting","onOk","onCancel"])],64)}var Y=T(H,[["render",J],["__scopeId","data-v-11988de2"]]);const x=v({name:"StationSettingsPage",components:{StationSettings:Y},setup(){return{}}}),tt={class:"flex justify-evenly"};function et(t,e,s,n,u,d){const o=C("StationSettings");return r(),m("section",tt,[a(o)])}var ct=T(x,[["render",et]]);export{ct as default};
